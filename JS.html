<script>
function TextCell(text) {
  this.lines = text.split('\n')
}

TextCell.prototype.minWidth = function() {
return Math.max(...this.lines.map(it => it.length))
}

TextCell.prototype.minHeight = function() {
return this.lines.length
}

TextCell.prototype.draw = function(width, height) {
  let result = []
  for (let i = 0; i < height; i++) {
    let line = this.lines[i] || ''
    while (line.length < width) {
      line += ' '
    }
    result.push(line)
  }
  return result
}

let tc = new TextCell('aaa\nbbb\nccc\nddd\neee')
tc.minWidth()
tc.minHeight()
tc.draw(1, 2)

let table = [
  [new TextCell('aaa\nbbb\nabab'),new TextCell('ccc\nddd')],
  [new TextCell('111\n222'),new TextCell('333\n444')],
  [new TextCell('777'),new TextCell('999\nfff')]
]

function rowHeights ( rows ) {
return rows . map ( function ( row ) {
return row . reduce ( function ( max , cell ) {
return Math . max ( max , cell . minHeight () ) ;
}, 0) ;
}) ;
}

function colWidths ( rows ) {
return rows [0]. map ( function (_ , i ) {
return rows . reduce ( function ( max , row ) {
return Math . max ( max , row [ i ]. minWidth () ) ;
}, 0) ;
}) ;
}

function drawTable ( rows ) {
var heights = rowHeights ( rows ) ;
var widths = colWidths ( rows ) ;
function drawLine ( blocks , lineNo ) {
return blocks . map ( function ( block ) {
return block [ lineNo ];
}) . join (" ") ;
}
function drawRow ( row , rowNum ) {
var blocks = row . map ( function ( cell , colNum ) {
return cell . draw ( widths [ colNum ] , heights [ rowNum ]) ;
}) ;
return blocks [0]. map ( function (_ , lineNo ) {
return drawLine ( blocks , lineNo ) ;
}) . join ("\n") ;
}
return rows.map ( drawRow ).join ("\n") ;
}

drawTable(table)
console.log(drawTable(table))

var MOUNTAINS = [
  {name: "Kilimanjaro", height: 5895, country: "Tanzania"},
  {name: "Everest", height: 8848, country: "Nepal"},
  {name: "Mount Fuji", height: 3776, country: "Japan"},
  {name: "Mont Blanc", height: 4808, country: "Italy/France"},
  {name: "Vaalserberg", height: 323, country: "Netherlands"},
  {name: "Denali", height: 6168, country: "United States"},
  {name: "Popocatepetl", height: 5465, country: "Mexico"}
];


</script>